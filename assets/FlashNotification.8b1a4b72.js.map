{"version":3,"file":"FlashNotification.8b1a4b72.js","sources":["../../src/organisms/Alerts/utils/handleTime.ts","../../src/organisms/Alerts/FlashNotification.tsx","../../src/organisms/Alerts/utils/useFlashNotification.ts","../../src/documentation/components/FlashNotificationDemo.tsx","../../src/documentation/pages/Organisms/FlashNotification.tsx"],"sourcesContent":["export const handleTime = (message: string): number => {\n  if (!message) return 3000\n\n  const words = message.trim().split(/\\s+/).length\n  const wordsPerMinute = 150\n  const baseMinutes = words / wordsPerMinute\n\n  // Convertimos a milisegundos: minutos * 60 segundos * 1000 ms\n  const totalMs = Math.round(baseMinutes * 60 * 1000)\n\n  // Aseguramos un mínimo de 3 segundos para mensajes muy cortos\n  return Math.max(3000, totalMs)\n}\n","import { useCallback, useEffect, useState } from 'react'\nimport { toast, Toaster } from 'react-hot-toast'\n\nimport { IFlashNotificationProps } from './types.d'\nimport { alertStates } from './utils/alertStates'\nimport { handleTime } from './utils/handleTime'\nimport { Alert } from './Alert'\n\n/**\n * Componente de notificación flash que se muestra centrada en la parte superior de la pantalla.\n * No requiere un contenedor <Toaster /> manual, ya que implementa un patrón Singleton.\n *\n * @example\n * const { show, active, config } = useFlashNotification({\n *   state: 'info',\n *   message: 'Respuesta guardada',\n * })\n *\n * return (\n *   <>\n *     <button onClick={active}>Trigger</button>\n *     <FlashNotification {...config} show={show} />\n *   </>\n * )\n */\n\n// Usamos una variable en window para asegurar que sea un único Toaster\n// incluso si la librería se carga en distintos bundles o proyectos.\nconst GLOBAL_TOASTER_FLAG = '_eclass_ui_kit_toaster_mounted'\n\nexport function FlashNotification({\n  message,\n  state,\n  show,\n  m,\n  width,\n}: IFlashNotificationProps): JSX.Element {\n  const [shouldRenderToaster, setShouldRenderToaster] = useState(false)\n\n  useEffect(() => {\n    // Si no hay un Toaster registrado globalmente en la ventana, esta instancia lo toma.\n    if (typeof window !== 'undefined' && !(window as any)[GLOBAL_TOASTER_FLAG]) {\n      ;(window as any)[GLOBAL_TOASTER_FLAG] = true\n      setShouldRenderToaster(true)\n    }\n  }, [])\n\n  const showToast = useCallback(() => {\n    toast(\n      (t) => (\n        <Alert\n          isFlash\n          state={state}\n          canDismiss\n          onClick={() => toast.dismiss(t.id)}\n          width={width}\n          maxContent={!width}\n          m={m}\n        >\n          {message}\n        </Alert>\n      ),\n      {\n        duration: state === 'success' ? handleTime(message) : Infinity,\n        id: alertStates[state].id,\n      }\n    )\n  }, [message, state, width, m])\n\n  useEffect(() => {\n    if (show) {\n      showToast()\n    }\n  }, [show, showToast])\n\n  return (\n    <>\n      {shouldRenderToaster && (\n        <Toaster\n          position=\"top-center\"\n          toastOptions={{\n            className: 'toastContainer',\n            style: {\n              background: 'transparent',\n              boxShadow: 'none',\n              maxWidth: width ?? 'max-content',\n            },\n          }}\n        />\n      )}\n    </>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport { IFlashNotificationProps } from '../types'\nimport { handleTime } from './handleTime'\n\n/**\n * Hook que actúa como trigger del componente FlashNotification,\n * usando los siguientes parámetros:\n * show: boolean que indica si la notificación se está mostrando o no,\n * active: función que modifica el estado de show,\n * config: contiene los valores de 'state' y message'\n * @example Llamado useFlashNotification y asignación de props\n * const { show, active, config } = useFlashNotification({\n *  state: 'info',\n *   message: 'Respuesta guardada',\n *})\n * @example Definición de trigger que activa la notificación\n * <button onClick={() => { active()}}> Activar notificación </button>\n * @example Componente FlashNotification recibiendo argumentos\n * <FlashNotification {...config} show={show} />\n */\n\nexport const useFlashNotification = ({ state, message, width }: IFlashNotificationProps): any => {\n  // Estado que maneja si la notificación debe mostrarse.\n  const [show, setShow] = useState(false)\n\n  // Effect que controla la visibilidad de la notificación basado en los cambios de estado\n  useEffect(() => {\n    // Si la notificación se está mostrando, se determina el tiempo tras el cual se ocultará.\n    if (show) {\n      const duration = state === 'success' ? handleTime(message) : 1000\n      const timeOut = setTimeout(() => {\n        setShow(false)\n      }, duration)\n      return () => clearTimeout(timeOut)\n    }\n  }, [message, show, state])\n\n  // Función que activa la notificación\n  const active = (): any => {\n    if (!show) {\n      setShow(true)\n    }\n  }\n\n  // Se retorna el estado de show, la función active y el objeto de config que contiene el estado y mensaje.\n  return {\n    show,\n    active,\n    config: {\n      state,\n      message,\n      width,\n    },\n  }\n}\n","import { FlashNotification, useFlashNotification } from '@/organisms'\nimport { IFlashNotificationProps } from '@/organisms/Alerts/types'\nimport { Box, Button } from '@chakra-ui/react'\n\nexport default function FlashNotificationDemo({\n  state,\n  message,\n  width,\n}: IFlashNotificationProps): JSX.Element {\n  const { show, active, config } = useFlashNotification({\n    state: state,\n    message: message,\n    width,\n  }) as { show: boolean; active: () => void; config: IFlashNotificationProps }\n  return (\n    <Box>\n      <Button onClick={active}>{state}</Button>\n      <FlashNotification\n        show={show}\n        state={config.state}\n        message={config.message}\n        width={config.width}\n      />\n    </Box>\n  )\n}\n","import { ListComponent, MyHeading, MyText, MyTitle, Code } from '@/documentation/components'\nimport FlashNotificationDemo from '@/documentation/components/FlashNotificationDemo'\n\nexport const ViewFlashNotification = (): JSX.Element => {\n  return (\n    <>\n      <MyHeading>Flash Notifications</MyHeading>\n      <MyText>\n        Las notificaciones flash se utilizan para entregar feedback desde el sistema, inmediatamente\n        después de un evento accionado por el usuario{' '}\n        <i>\n          (Ej: luego de agendar una clase en vivo, luego ingresar una pregunta sobre el curso, etc)\n        </i>{' '}\n        o accionado por el mismo sistema{' '}\n        <i>(Ej: Problemas de conexión, fallos al guardar o cargar datos, etc.)</i>\n      </MyText>\n      <MyText>\n        <b>Tiempo de permanencia y auto-cerrado:</b>\n        <br />\n        La duración de la notificación depende de su estado y la longitud del mensaje. El sistema\n        calcula el tiempo necesario para leer el contenido basado en una velocidad promedio de{' '}\n        <b>150 palabras por minuto</b>:\n        <li>\n          <b>Estado Success:</b> Se cierra automáticamente tras el tiempo calculado (con un mínimo\n          de 3 segundos garantizados).\n        </li>\n        <li>\n          <b>Otros Estados (Error, Warning, Info):</b> Permanecen visibles de forma persistente.\n          Esto asegura que el usuario tenga tiempo suficiente para leer errores o advertencias\n          críticas y requiere un cierre manual mediante la \"X\".\n        </li>\n      </MyText>\n\n      <MyTitle>Ancho y Centrado</MyTitle>\n      <MyText>\n        Por defecto, la notificación toma un ancho de <b>max-content</b> (se ajusta al texto) y se\n        mantiene perfectamente centrada en la parte superior de la pantalla. Si deseas un control\n        más específico, puedes pasar un ancho fijo mediante la propiedad <b>width</b>.\n      </MyText>\n      <ListComponent>\n        <FlashNotificationDemo\n          state=\"error\"\n          message=\"<strong>El grupo ya está completo</strong><br/>Lo sentimos, no es posible unirte porque el grupo acaba de alcanzar su límite de integrantes.\"\n        />\n        <FlashNotificationDemo\n          state=\"info\"\n          message=\"Notificación con ancho fijo de 600px\"\n          width=\"600px\"\n        />\n      </ListComponent>\n      <Code\n        text={`// Notificación con ancho automático (max-content)\n<FlashNotification\n  state=\"error\"\n  show={show}\n  message=\"Mensaje con ancho automático...\"\n/>\n\n// Notificación con ancho fijo\n<FlashNotification\n  state=\"info\"\n  show={show}\n  width=\"600px\"\n  message=\"Mensaje con ancho fijo de 600px\"\n/>`}\n      />\n\n      <MyTitle>Implementación Singleton</MyTitle>\n      <MyText>\n        No es necesario añadir un contenedor de <i>Toaster</i> manualmente en tu aplicación. El\n        componente <b>FlashNotification</b> gestiona automáticamente una única instancia global\n        (Singleton), asegurando que las notificaciones no se dupliquen ni se pisen, incluso si el\n        componente se usa en múltiples lugares de tu proyecto.\n      </MyText>\n\n      <Code\n        text={`import { FlashNotification, useFlashNotification } from '@eclass/ui-kit'\n\nconst MyComponent = () => {\n  const { show, active, config } = useFlashNotification({\n    state: 'success',\n    message: '¡Cambios guardados con éxito!',\n  })\n\n  return (\n    <>\n      <Button onClick={active}>Guardar</Button>\n      <FlashNotification {...config} show={show} />\n    </>\n  )\n}`}\n      />\n\n      <MyTitle>Estados</MyTitle>\n      <MyText>Existen 4 posibles estados que definen el ícono y color de la notificación.</MyText>\n      <ListComponent>\n        <FlashNotificationDemo\n          state=\"info\"\n          message=\"<b>¡Grupo creado!</b><br />Tu grupo ha sido creado. Ahora puedes invitar a tus compañeros.\"\n        />\n        <FlashNotificationDemo state=\"success\" message=\"Mensaje de éxito (Auto-cerrado)\" />\n        <FlashNotificationDemo state=\"error\" message=\"Mensaje de error (Persistente)\" />\n        <FlashNotificationDemo state=\"warning\" message=\"Mensaje de advertencia (Persistente)\" />\n      </ListComponent>\n    </>\n  )\n}\n\nexport default ViewFlashNotification\n"],"names":["handleTime","message","baseMinutes","totalMs","GLOBAL_TOASTER_FLAG","FlashNotification","state","show","m","width","shouldRenderToaster","setShouldRenderToaster","useState","useEffect","window","showToast","useCallback","t","Alert","isFlash","canDismiss","onClick","toast","dismiss","id","maxContent","children","duration","Infinity","alertStates","_Fragment","_jsx","Toaster","position","toastOptions","className","style","background","boxShadow","maxWidth","useFlashNotification","setShow","timeOut","FlashNotificationDemo","active","config","Box","Button","ViewFlashNotification","MyHeading","_jsxs","MyText","MyTitle","ListComponent","Code","text"],"mappings":"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"}